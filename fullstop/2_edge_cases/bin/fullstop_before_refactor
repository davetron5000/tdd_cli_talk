#!/usr/bin/env ruby -w

require 'optparse'
require 'fileutils'

include FileUtils

option_parser = OptionParser.new do |opts|
  executable_name = File.basename(__FILE__)
  opts.banner = "Usage: #{executable_name} [options]"
end

option_parser.parse!

repo = ARGV[0]
checkout_dir = ARGV[1]

mkdir_p checkout_dir
chdir checkout_dir
`git clone #{repo} dotfiles`

dotfiles_dir = File.join(checkout_dir,'dotfiles')
Dir["#{dotfiles_dir}/.*","#{dotfiles_dir}/*"].each do |file|
  if File.basename(file) != '..' && File.basename(file) != '.'
    ln_s file,'.'
  end
end

